 最终定稿需求（一句话总结）
 利用dify，还有本地的qdrant RAG来实现
一个「滚动式 + 人工全程介入 + 设定自动生长 + 每次生成都新建文件方便你删改」的超长篇小说连载生成器。

参考著作放在data/references/下，大纲放在data/Outline/下，设定放在data/World Guide下，已生成的章节放在data/Chapter下，向量数据库放在db/下

- 用到RAG技术，来使用参考著作、设定集，之前的剧情，大纲
- 大纲每次15章，生成后新建 `大纲_第1-15章.txt`、`大纲_第16-30章.txt`……大纲篇幅至少为正文的30%，同时不需要解释，生成的大纲时不包含标题和内容分段的，不要写明章节对应内容，以免降低创造力
- 新设定集和新大纲都建立新文件放，不与旧的设定集和大纲合并
- 根据大纲与设定集，依次生成标题与正文每章约4000字，生成后保存为 `第1章 标题.txt`、`第2章 标题.txt`……标题那一步直接给出标题即可，不需要解释
- 每一步都暂停让你确认/修改/重写，全部用新建文件方式，方便你直接在文件夹里删改
- 生成过程同时参考一些著作，大纲，之前的情节，设定集
- 先做命令行交互版（最快跑通）
- 大模型使用deepseek
- 应该记录下状态，放置聊天中断了，最好做成一个个api，然后集成起来

START (用户输入主题想法，例如“废柴少年逆袭玄幻” + 总章节数)
  ↓
1. 用情节和主题提示词 → 生成大纲（简述）
   ↓ (暂停：显示大纲，问“确认/修改/添加章节？” → 更新)
2. 用大纲 → 生成设定集
   ↓ (暂停：显示设定，问“确认/补充新字段（如加角色）？” → 可以多次补充，直到你说“继续”)
3. 进入章节循环：
   - 生成下一章（标题，正文2000-6000字，带完整状态）
   - 保存章节
   ↓ (暂停：显示章节，问“确认/修改/重生成？” → 如果修改，更新已写章节)
   - 如果还有章节，继续循环；否则合并完整小说
  ↓
（暂停：询问是否结束，如果不结束就继续）
回到2，继续生成大纲

我需要工艺级的工作流，即每一个部分都单独分开做，提升效率。一共包含，数据库，start，1.大纲生成，
2.设定集生成，3.章节生成，主运行文件。

开发进度：
实现了本地RAG，接口还没做出来，但是做出了执行文件
实现了dify大纲生成，接口开放在本地

接下来的计划：
制作正文生成，将RAG做成api接口